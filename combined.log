2025-04-16 20:09:31 INFO [inventory-api:EnvValidator]: =============== ENVIRONMENT SUMMARY =============== 
2025-04-16 20:09:31 INFO [inventory-api:Passport]: GitHub authentication strategy initialized successfully 
2025-04-16 20:09:31 INFO [inventory-api:Server]: Server running on https://cse341-final-project-team-14.onrender.com in production mode 
2025-04-16 20:09:31 INFO [inventory-api:EnvValidator]: Environment: PRODUCTION 
2025-04-16 20:09:31 INFO [inventory-api:EnvValidator]: Port: 3000 
2025-04-16 20:09:31 INFO [inventory-api:EnvValidator]: Database: mongodb+srv://ol****:********@cluster0.wncfx.mongodb.net/team_14_final_project?retryWrites=true&w=majority&appName=Cluster0 
2025-04-16 20:09:31 INFO [inventory-api:EnvValidator]: External URL: https://cse341-final-project-team-14.onrender.com 
2025-04-16 20:09:31 INFO [inventory-api:EnvValidator]: ------- Features Status ------- 
2025-04-16 20:09:31 INFO [inventory-api:EnvValidator]: githubOAuth: Enabled ✅ 
2025-04-16 20:09:31 INFO [inventory-api:EnvValidator]: =============================================== 
2025-04-16 20:09:31 INFO [inventory-api:Server]: API Documentation: https://cse341-final-project-team-14.onrender.com/api-docs 
2025-04-16 20:09:34 INFO [inventory-api:Database]: MongoDB Connected: cluster0-shard-00-00.wncfx.mongodb.net 
2025-04-16 20:57:51 INFO [inventory-api:EnvValidator]: =============== ENVIRONMENT SUMMARY =============== 
2025-04-16 20:57:51 INFO [inventory-api:Passport]: GitHub authentication strategy initialized successfully 
2025-04-16 20:57:51 INFO [inventory-api:Server]: Server running on https://cse341-final-project-team-14.onrender.com in production mode 
2025-04-16 20:57:51 INFO [inventory-api:EnvValidator]: Environment: PRODUCTION 
2025-04-16 20:57:51 INFO [inventory-api:EnvValidator]: Port: 3000 
2025-04-16 20:57:51 INFO [inventory-api:EnvValidator]: Database: mongodb+srv://ol****:********@cluster0.wncfx.mongodb.net/team_14_final_project?retryWrites=true&w=majority&appName=Cluster0 
2025-04-16 20:57:51 INFO [inventory-api:EnvValidator]: External URL: https://cse341-final-project-team-14.onrender.com 
2025-04-16 20:57:51 INFO [inventory-api:EnvValidator]: ------- Features Status ------- 
2025-04-16 20:57:51 INFO [inventory-api:EnvValidator]: githubOAuth: Enabled ✅ 
2025-04-16 20:57:51 INFO [inventory-api:EnvValidator]: =============================================== 
2025-04-16 20:57:51 INFO [inventory-api:Server]: API Documentation: https://cse341-final-project-team-14.onrender.com/api-docs 
2025-04-16 20:57:54 INFO [inventory-api:Database]: MongoDB Connected: cluster0-shard-00-02.wncfx.mongodb.net 
2025-04-16 21:07:46 INFO [inventory-api:AuthController]: login controller called 
2025-04-16 21:07:47 INFO [inventory-api:AuthService]: User authenticated successfully: olwalgeorge15@gmail.com 
2025-04-16 21:09:02 ERROR [inventory-api:AuthUtils]: Failed to blacklist token: Token validation failed: type: Path `type` is required. 
ValidationError: Token validation failed: type: Path `type` is required.
    at Document.invalidate (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\mongoose\lib\document.js:3329:32)
    at C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\mongoose\lib\document.js:3090:17
    at C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\mongoose\lib\schemaType.js:1407:9
    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)
2025-04-16 21:09:02 INFO [inventory-api:AuthController]: JWT token blacklisted during logout 
2025-04-16 21:09:03 INFO [inventory-api:AuthController]: User logged out successfully: session destroyed and JWT not present 
2025-04-16 21:13:46 INFO [inventory-api:Server]: SIGINT signal received, shutting down gracefully 
2025-04-16 21:13:46 INFO [inventory-api:Database]: Closing MongoDB connection due to server shutdown 
2025-04-16 21:13:58 INFO [inventory-api:EnvValidator]: =============== ENVIRONMENT SUMMARY =============== 
2025-04-16 21:13:58 INFO [inventory-api:Passport]: GitHub authentication strategy initialized successfully 
2025-04-16 21:13:58 INFO [inventory-api:EnvValidator]: Environment: PRODUCTION 
2025-04-16 21:13:58 INFO [inventory-api:EnvValidator]: Port: 3000 
2025-04-16 21:13:58 INFO [inventory-api:EnvValidator]: Database: mongodb+srv://ol****:********@cluster0.wncfx.mongodb.net/team_14_final_project?retryWrites=true&w=majority&appName=Cluster0 
2025-04-16 21:13:58 INFO [inventory-api:EnvValidator]: External URL: https://cse341-final-project-team-14.onrender.com 
2025-04-16 21:13:58 INFO [inventory-api:EnvValidator]: ------- Features Status ------- 
2025-04-16 21:13:58 INFO [inventory-api:EnvValidator]: githubOAuth: Enabled ✅ 
2025-04-16 21:13:58 INFO [inventory-api:EnvValidator]: =============================================== 
2025-04-16 21:13:58 INFO [inventory-api:Server]: Server running on https://cse341-final-project-team-14.onrender.com in production mode 
2025-04-16 21:13:58 INFO [inventory-api:Server]: API Documentation: https://cse341-final-project-team-14.onrender.com/api-docs 
2025-04-16 21:14:01 INFO [inventory-api:Database]: MongoDB Connected: cluster0-shard-00-01.wncfx.mongodb.net 
2025-04-16 21:14:48 INFO [inventory-api:AuthUtils]: Token has been blacklisted. Reason: logout 
2025-04-16 21:14:48 INFO [inventory-api:AuthController]: JWT token blacklisted during logout 
2025-04-16 21:14:48 INFO [inventory-api:AuthController]: User logged out successfully: session destroyed and JWT invalidated 
2025-04-16 21:15:20 WARN [inventory-api:Auth:JWT]: Token was found in blacklist during verification 
2025-04-16 21:16:24 INFO [inventory-api:UsersController]: getAllUsers called 
2025-04-16 21:17:18 INFO [inventory-api:UsersController]: getAllUsers called 
2025-04-16 21:17:21 INFO [inventory-api:UsersController]: getAllUsers called 
2025-04-16 21:17:23 INFO [inventory-api:UsersController]: getAllUsers called 
2025-04-16 21:17:59 WARN [inventory-api:Auth:JWT]: Token was found in blacklist during verification 
2025-04-16 21:18:25 ERROR [inventory-api:AuthUtils]: Failed to blacklist token: E11000 duplicate key error collection: team_14_final_project.tokens index: token_1 dup key: { token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2N2ZmYjE2YzNhYThiZmM0OWE1ZGQxZjciLCJ1c2VySWQiOiJVU1ItMDAwMDkiLCJlbWFpbCI6Im9sd2FsZ2VvcmdlMTVAZ21haWwuY..." } 
MongoServerError: E11000 duplicate key error collection: team_14_final_project.tokens index: token_1 dup key: { token: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2N2ZmYjE2YzNhYThiZmM0OWE1ZGQxZjciLCJ1c2VySWQiOiJVU1ItMDAwMDkiLCJlbWFpbCI6Im9sd2FsZ2VvcmdlMTVAZ21haWwuY..." }
    at InsertOneOperation.execute (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\mongodb\lib\operations\insert.js:51:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async tryOperation (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\mongodb\lib\operations\execute_operation.js:207:20)
    at async executeOperation (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\mongodb\lib\operations\execute_operation.js:75:16)
    at async Collection.insertOne (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\mongodb\lib\collection.js:157:16)
2025-04-16 21:18:25 INFO [inventory-api:AuthController]: JWT token blacklisted during logout 
2025-04-16 21:18:26 INFO [inventory-api:AuthController]: User logged out successfully: session destroyed and JWT not present 
2025-04-16 21:18:51 INFO [inventory-api:UsersController]: getUserById called with ID: undefined 
2025-04-16 21:18:51 ERROR [inventory-api:ErrorMiddleware]: Error caught in middleware: DatabaseError - User not found 
2025-04-16 21:19:12 INFO [inventory-api:UsersController]: getAllUsers called 
2025-04-16 21:21:47 INFO [inventory-api:EnvValidator]: =============== ENVIRONMENT SUMMARY =============== 
2025-04-16 21:21:47 INFO [inventory-api:Passport]: GitHub authentication strategy initialized successfully 
2025-04-16 21:21:47 INFO [inventory-api:Server]: Server running on https://cse341-final-project-team-14.onrender.com in production mode 
2025-04-16 21:21:47 INFO [inventory-api:EnvValidator]: Environment: PRODUCTION 
2025-04-16 21:21:47 INFO [inventory-api:EnvValidator]: Port: 3000 
2025-04-16 21:21:47 INFO [inventory-api:EnvValidator]: Database: mongodb+srv://ol****:********@cluster0.wncfx.mongodb.net/team_14_final_project?retryWrites=true&w=majority&appName=Cluster0 
2025-04-16 21:21:47 INFO [inventory-api:EnvValidator]: External URL: https://cse341-final-project-team-14.onrender.com 
2025-04-16 21:21:47 INFO [inventory-api:EnvValidator]: ------- Features Status ------- 
2025-04-16 21:21:47 INFO [inventory-api:EnvValidator]: githubOAuth: Enabled ✅ 
2025-04-16 21:21:47 INFO [inventory-api:EnvValidator]: =============================================== 
2025-04-16 21:21:47 INFO [inventory-api:Server]: API Documentation: https://cse341-final-project-team-14.onrender.com/api-docs 
2025-04-16 21:21:50 INFO [inventory-api:Database]: MongoDB Connected: cluster0-shard-00-01.wncfx.mongodb.net 
2025-04-16 21:22:00 INFO [inventory-api:UsersController]: getAllUsers called 
2025-04-16 21:22:23 INFO [inventory-api:UsersController]: getUserProfile called for user jakom (ID: 67ffb16c3aa8bfc49a5dd1f7, userID: USR-00009) 
2025-04-16 21:28:18 INFO [inventory-api:Server]: SIGINT signal received, shutting down gracefully 
2025-04-16 21:28:18 INFO [inventory-api:Database]: Closing MongoDB connection due to server shutdown 
2025-04-16 21:28:30 INFO [inventory-api:EnvValidator]: =============== ENVIRONMENT SUMMARY =============== 
2025-04-16 21:28:30 INFO [inventory-api:Passport]: GitHub authentication strategy initialized successfully 
2025-04-16 21:28:30 INFO [inventory-api:EnvValidator]: Environment: PRODUCTION 
2025-04-16 21:28:30 INFO [inventory-api:EnvValidator]: Port: 3000 
2025-04-16 21:28:30 INFO [inventory-api:EnvValidator]: Database: mongodb+srv://ol****:********@cluster0.wncfx.mongodb.net/team_14_final_project?retryWrites=true&w=majority&appName=Cluster0 
2025-04-16 21:28:30 INFO [inventory-api:EnvValidator]: External URL: https://cse341-final-project-team-14.onrender.com 
2025-04-16 21:28:30 INFO [inventory-api:EnvValidator]: ------- Features Status ------- 
2025-04-16 21:28:30 INFO [inventory-api:EnvValidator]: githubOAuth: Enabled ✅ 
2025-04-16 21:28:30 INFO [inventory-api:EnvValidator]: =============================================== 
2025-04-16 21:28:30 INFO [inventory-api:Server]: Server running on https://cse341-final-project-team-14.onrender.com in production mode 
2025-04-16 21:28:30 INFO [inventory-api:Server]: API Documentation: https://cse341-final-project-team-14.onrender.com/api-docs 
2025-04-16 21:28:33 INFO [inventory-api:Database]: MongoDB Connected: cluster0-shard-00-01.wncfx.mongodb.net 
2025-04-16 21:31:33 WARN [inventory-api:AuthMiddleware]: Attempt to use blacklisted token 
2025-04-16 21:31:33 ERROR [inventory-api:ErrorMiddleware]: Error caught in middleware: AuthError - Token has been invalidated. Please log in again. 
2025-04-16 21:36:19 INFO [inventory-api:EnvValidator]: =============== ENVIRONMENT SUMMARY =============== 
2025-04-16 21:36:18 INFO [inventory-api:Passport]: GitHub authentication strategy initialized successfully 
2025-04-16 21:36:19 INFO [inventory-api:Server]: Server running on https://cse341-final-project-team-14.onrender.com in production mode 
2025-04-16 21:36:19 INFO [inventory-api:EnvValidator]: Environment: PRODUCTION 
2025-04-16 21:36:19 INFO [inventory-api:EnvValidator]: Port: 3000 
2025-04-16 21:36:19 INFO [inventory-api:EnvValidator]: Database: mongodb+srv://ol****:********@cluster0.wncfx.mongodb.net/team_14_final_project?retryWrites=true&w=majority&appName=Cluster0 
2025-04-16 21:36:19 INFO [inventory-api:EnvValidator]: External URL: https://cse341-final-project-team-14.onrender.com 
2025-04-16 21:36:19 INFO [inventory-api:EnvValidator]: ------- Features Status ------- 
2025-04-16 21:36:19 INFO [inventory-api:EnvValidator]: githubOAuth: Enabled ✅ 
2025-04-16 21:36:19 INFO [inventory-api:EnvValidator]: =============================================== 
2025-04-16 21:36:19 INFO [inventory-api:Server]: API Documentation: https://cse341-final-project-team-14.onrender.com/api-docs 
2025-04-16 21:36:25 INFO [inventory-api:Database]: MongoDB Connected: cluster0-shard-00-01.wncfx.mongodb.net 
2025-04-16 21:36:40 WARN [inventory-api:AuthMiddleware]: Attempt to use blacklisted token 
2025-04-16 21:36:40 ERROR [inventory-api:ErrorMiddleware]: Error caught in middleware: AuthError - Token has been invalidated. Please log in again. 
2025-04-16 21:36:51 INFO [inventory-api:Server]: SIGINT signal received, shutting down gracefully 
2025-04-16 21:36:51 INFO [inventory-api:Database]: Closing MongoDB connection due to server shutdown 
2025-04-16 21:37:33 INFO [inventory-api:EnvValidator]: =============== ENVIRONMENT SUMMARY =============== 
2025-04-16 21:37:33 INFO [inventory-api:Passport]: GitHub authentication strategy initialized successfully 
2025-04-16 21:37:33 INFO [inventory-api:Server]: Server running on https://cse341-final-project-team-14.onrender.com in production mode 
2025-04-16 21:37:33 INFO [inventory-api:EnvValidator]: Environment: PRODUCTION 
2025-04-16 21:37:33 INFO [inventory-api:EnvValidator]: Port: 3000 
2025-04-16 21:37:33 INFO [inventory-api:EnvValidator]: Database: mongodb+srv://ol****:********@cluster0.wncfx.mongodb.net/team_14_final_project?retryWrites=true&w=majority&appName=Cluster0 
2025-04-16 21:37:33 INFO [inventory-api:EnvValidator]: External URL: https://cse341-final-project-team-14.onrender.com 
2025-04-16 21:37:33 INFO [inventory-api:EnvValidator]: ------- Features Status ------- 
2025-04-16 21:37:33 INFO [inventory-api:EnvValidator]: githubOAuth: Enabled ✅ 
2025-04-16 21:37:33 INFO [inventory-api:EnvValidator]: =============================================== 
2025-04-16 21:37:33 INFO [inventory-api:Server]: API Documentation: https://cse341-final-project-team-14.onrender.com/api-docs 
2025-04-16 21:37:38 INFO [inventory-api:Database]: MongoDB Connected: cluster0-shard-00-02.wncfx.mongodb.net 
2025-04-16 21:47:23 INFO [inventory-api:Server]: SIGINT signal received, shutting down gracefully 
2025-04-16 21:47:23 INFO [inventory-api:Database]: Closing MongoDB connection due to server shutdown 
2025-04-16 21:47:27 INFO [inventory-api:EnvValidator]: =============== ENVIRONMENT SUMMARY =============== 
2025-04-16 21:47:27 INFO [inventory-api:Passport]: GitHub authentication strategy initialized successfully 
2025-04-16 21:47:27 INFO [inventory-api:Server]: Server running on https://cse341-final-project-team-14.onrender.com in production mode 
2025-04-16 21:47:27 INFO [inventory-api:EnvValidator]: Environment: PRODUCTION 
2025-04-16 21:47:27 INFO [inventory-api:EnvValidator]: Port: 3000 
2025-04-16 21:47:27 INFO [inventory-api:EnvValidator]: Database: mongodb+srv://ol****:********@cluster0.wncfx.mongodb.net/team_14_final_project?retryWrites=true&w=majority&appName=Cluster0 
2025-04-16 21:47:27 INFO [inventory-api:EnvValidator]: External URL: https://cse341-final-project-team-14.onrender.com 
2025-04-16 21:47:27 INFO [inventory-api:EnvValidator]: ------- Features Status ------- 
2025-04-16 21:47:27 INFO [inventory-api:EnvValidator]: githubOAuth: Enabled ✅ 
2025-04-16 21:47:27 INFO [inventory-api:EnvValidator]: =============================================== 
2025-04-16 21:47:27 INFO [inventory-api:Server]: API Documentation: https://cse341-final-project-team-14.onrender.com/api-docs 
2025-04-16 21:47:30 INFO [inventory-api:Database]: MongoDB Connected: cluster0-shard-00-01.wncfx.mongodb.net 
2025-04-16 21:52:37 INFO [inventory-api:Server]: SIGINT signal received, shutting down gracefully 
2025-04-16 21:52:37 INFO [inventory-api:Database]: Closing MongoDB connection due to server shutdown 
2025-04-16 21:55:51 INFO [inventory-api:EnvValidator]: =============== ENVIRONMENT SUMMARY =============== 
2025-04-16 21:55:51 INFO [inventory-api:Passport]: GitHub authentication strategy initialized successfully 
2025-04-16 21:55:51 INFO [inventory-api:Server]: Server running on https://cse341-final-project-team-14.onrender.com in production mode 
2025-04-16 21:55:51 INFO [inventory-api:EnvValidator]: Environment: PRODUCTION 
2025-04-16 21:55:51 INFO [inventory-api:EnvValidator]: Port: 3000 
2025-04-16 21:55:51 INFO [inventory-api:EnvValidator]: Database: mongodb+srv://ol****:********@cluster0.wncfx.mongodb.net/team_14_final_project?retryWrites=true&w=majority&appName=Cluster0 
2025-04-16 21:55:51 INFO [inventory-api:EnvValidator]: External URL: https://cse341-final-project-team-14.onrender.com 
2025-04-16 21:55:51 INFO [inventory-api:EnvValidator]: ------- Features Status ------- 
2025-04-16 21:55:51 INFO [inventory-api:EnvValidator]: githubOAuth: Enabled ✅ 
2025-04-16 21:55:51 INFO [inventory-api:EnvValidator]: =============================================== 
2025-04-16 21:55:51 INFO [inventory-api:Server]: API Documentation: https://cse341-final-project-team-14.onrender.com/api-docs 
2025-04-16 21:55:55 INFO [inventory-api:Database]: MongoDB Connected: cluster0-shard-00-00.wncfx.mongodb.net 
2025-04-16 21:58:59 DEBUG [inventory-api:TokenModel]: Fixed duplicate indexes in Token schema: 
2025-04-16 21:58:59 INFO [inventory-api:EnvValidator]: =============== ENVIRONMENT SUMMARY =============== 
2025-04-16 21:58:59 INFO [inventory-api:Passport]: GitHub authentication strategy initialized successfully 
2025-04-16 21:58:59 INFO [inventory-api:Server]: Server running on http://localhost:3000 in development mode 
2025-04-16 21:58:59 INFO [inventory-api:EnvValidator]: Environment: DEVELOPMENT 
2025-04-16 21:58:59 INFO [inventory-api:EnvValidator]: Port: 3000 
2025-04-16 21:58:59 INFO [inventory-api:EnvValidator]: Database: mongodb+srv://ol****:********@cluster0.wncfx.mongodb.net/team_14_final_project?retryWrites=true&w=majority&appName=Cluster0 
2025-04-16 21:58:59 INFO [inventory-api:EnvValidator]: ------- Features Status ------- 
2025-04-16 21:58:59 INFO [inventory-api:EnvValidator]: githubOAuth: Enabled ✅ 
2025-04-16 21:58:59 INFO [inventory-api:EnvValidator]: =============================================== 
2025-04-16 21:58:59 INFO [inventory-api:Server]: API Documentation: http://localhost:3000/api-docs 
2025-04-16 21:59:08 ERROR [inventory-api:Database]: Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/ 
MongooseServerSelectionError: Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/
    at _handleConnectionErrors (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\mongoose\lib\connection.js:1165:11)
    at NativeConnection.openUri (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\mongoose\lib\connection.js:1096:11)
    at async C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\config\database.js:46:22
2025-04-16 21:59:08 ERROR [inventory-api:App]: Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/ 
MongooseServerSelectionError: Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/
    at _handleConnectionErrors (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\mongoose\lib\connection.js:1165:11)
    at NativeConnection.openUri (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\mongoose\lib\connection.js:1096:11)
    at async C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\config\database.js:46:22
2025-04-16 22:00:03 INFO [inventory-api:Server]: SIGINT signal received, shutting down gracefully 
2025-04-16 22:00:03 INFO [inventory-api:Database]: No active MongoDB connection to close 
2025-04-16 22:00:08 DEBUG [inventory-api:TokenModel]: Fixed duplicate indexes in Token schema: 
2025-04-16 22:00:09 INFO [inventory-api:EnvValidator]: =============== ENVIRONMENT SUMMARY =============== 
2025-04-16 22:00:08 INFO [inventory-api:Passport]: GitHub authentication strategy initialized successfully 
2025-04-16 22:00:09 INFO [inventory-api:Server]: Server running on http://localhost:3000 in development mode 
2025-04-16 22:00:09 INFO [inventory-api:EnvValidator]: Environment: DEVELOPMENT 
2025-04-16 22:00:09 INFO [inventory-api:EnvValidator]: Port: 3000 
2025-04-16 22:00:09 INFO [inventory-api:EnvValidator]: Database: mongodb+srv://ol****:********@cluster0.wncfx.mongodb.net/team_14_final_project?retryWrites=true&w=majority&appName=Cluster0 
2025-04-16 22:00:09 INFO [inventory-api:EnvValidator]: ------- Features Status ------- 
2025-04-16 22:00:09 INFO [inventory-api:EnvValidator]: githubOAuth: Enabled ✅ 
2025-04-16 22:00:09 INFO [inventory-api:EnvValidator]: =============================================== 
2025-04-16 22:00:09 INFO [inventory-api:Server]: API Documentation: http://localhost:3000/api-docs 
2025-04-16 22:00:12 INFO [inventory-api:Database]: MongoDB Connected: cluster0-shard-00-01.wncfx.mongodb.net 
2025-04-16 22:00:34 DEBUG [inventory-api:App]: Session: 
2025-04-16 22:00:34 DEBUG [inventory-api:App]: Session: 
2025-04-16 22:00:34 DEBUG [inventory-api:App]: Session: 
2025-04-16 22:00:34 DEBUG [inventory-api:App]: Session: 
2025-04-16 22:00:34 DEBUG [inventory-api:App]: Session: 
2025-04-16 22:07:02 DEBUG [inventory-api:App]: Session: 
2025-04-16 22:07:02 INFO [inventory-api:AuthController]: login controller called 
2025-04-16 22:07:02 DEBUG [inventory-api:AuthService]: authenticateUserService called for email: olwalgeorge15@gmail.com 
2025-04-16 22:07:03 INFO [inventory-api:AuthService]: User authenticated successfully: olwalgeorge15@gmail.com 
2025-04-16 22:07:17 DEBUG [inventory-api:App]: Session: 
2025-04-16 22:07:18 WARN [inventory-api:AuthMiddleware]: Attempt to use blacklisted token 
2025-04-16 22:07:18 ERROR [inventory-api:ErrorMiddleware]: Error caught in middleware: AuthError - Token has been invalidated. Please log in again. 
2025-04-16 22:16:03 INFO [inventory-api:Server]: SIGINT signal received, shutting down gracefully 
2025-04-16 22:16:03 INFO [inventory-api:Database]: Closing MongoDB connection due to server shutdown 
2025-04-16 22:22:30 INFO [inventory-api:EnvValidator]: =============== ENVIRONMENT SUMMARY =============== 
2025-04-16 22:22:30 INFO [inventory-api:Passport]: GitHub authentication strategy initialized successfully 
2025-04-16 22:22:30 INFO [inventory-api:EnvValidator]: Environment: DEVELOPMENT 
2025-04-16 22:22:30 INFO [inventory-api:EnvValidator]: Port: 3000 
2025-04-16 22:22:30 INFO [inventory-api:EnvValidator]: Database: mongodb+srv://ol****:********@cluster0.wncfx.mongodb.net/team_14_final_project?retryWrites=true&w=majority&appName=Cluster0 
2025-04-16 22:22:30 INFO [inventory-api:EnvValidator]: ------- Features Status ------- 
2025-04-16 22:22:30 INFO [inventory-api:EnvValidator]: githubOAuth: Enabled ✅ 
2025-04-16 22:22:30 INFO [inventory-api:EnvValidator]: =============================================== 
2025-04-16 22:22:30 INFO [inventory-api:Server]: Server running on http://localhost:3000 in development mode 
2025-04-16 22:22:30 INFO [inventory-api:Server]: API Documentation: http://localhost:3000/api-docs 
2025-04-16 22:22:33 INFO [inventory-api:Database]: MongoDB Connected: cluster0-shard-00-00.wncfx.mongodb.net 
2025-04-16 22:24:49 DEBUG [inventory-api:App]: Session: 
2025-04-16 22:24:49 INFO [inventory-api:AuthController]: login controller called 
2025-04-16 22:24:49 DEBUG [inventory-api:AuthService]: authenticateUserService called for email: olwalgeorge15@gmail.com 
2025-04-16 22:24:50 INFO [inventory-api:AuthService]: User authenticated successfully: olwalgeorge15@gmail.com 
2025-04-16 22:29:19 DEBUG [inventory-api:App]: Session: 
2025-04-16 22:29:48 DEBUG [inventory-api:App]: Session: 
2025-04-16 22:29:49 WARN [inventory-api:AuthController]: Error processing token during logout: 
2025-04-16 22:29:49 ERROR [inventory-api:Server]: Uncaught exception: Cannot read properties of undefined (reading 'regenerate') 
TypeError: Cannot read properties of undefined (reading 'regenerate')
    at C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\passport\lib\sessionmanager.js:83:17
    at C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\connect-mongodb-session\index.js:222:44
    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)
2025-04-16 22:29:49 INFO [inventory-api:Database]: Closing MongoDB connection due to server shutdown 
2025-04-16 22:30:47 INFO [inventory-api:EnvValidator]: =============== ENVIRONMENT SUMMARY =============== 
2025-04-16 22:30:46 INFO [inventory-api:Passport]: GitHub authentication strategy initialized successfully 
2025-04-16 22:30:47 INFO [inventory-api:EnvValidator]: Environment: DEVELOPMENT 
2025-04-16 22:30:47 INFO [inventory-api:EnvValidator]: Port: 3000 
2025-04-16 22:30:47 INFO [inventory-api:EnvValidator]: Database: mongodb+srv://ol****:********@cluster0.wncfx.mongodb.net/team_14_final_project?retryWrites=true&w=majority&appName=Cluster0 
2025-04-16 22:30:47 INFO [inventory-api:EnvValidator]: ------- Features Status ------- 
2025-04-16 22:30:47 INFO [inventory-api:EnvValidator]: githubOAuth: Enabled ✅ 
2025-04-16 22:30:47 INFO [inventory-api:EnvValidator]: =============================================== 
2025-04-16 22:30:47 INFO [inventory-api:Server]: Server running on http://localhost:3000 in development mode 
2025-04-16 22:30:47 INFO [inventory-api:Server]: API Documentation: http://localhost:3000/api-docs 
2025-04-16 22:30:50 INFO [inventory-api:Database]: MongoDB Connected: cluster0-shard-00-00.wncfx.mongodb.net 
2025-04-16 22:30:53 DEBUG [inventory-api:App]: Session: 
2025-04-16 22:31:06 DEBUG [inventory-api:App]: Session: 
2025-04-16 22:31:08 WARN [inventory-api:AuthController]: Error processing token during logout: 
2025-04-16 22:31:08 ERROR [inventory-api:Server]: Uncaught exception: Cannot read properties of undefined (reading 'regenerate') 
TypeError: Cannot read properties of undefined (reading 'regenerate')
    at C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\passport\lib\sessionmanager.js:83:17
    at C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\connect-mongodb-session\index.js:222:44
    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)
2025-04-16 22:31:08 INFO [inventory-api:Database]: Closing MongoDB connection due to server shutdown 
2025-04-16 22:40:12 DEBUG [inventory-api:TokenModel]: Fixed duplicate indexes in Token schema: 
2025-04-16 22:40:13 INFO [inventory-api:EnvValidator]: =============== ENVIRONMENT SUMMARY =============== 
2025-04-16 22:40:13 INFO [inventory-api:Passport]: GitHub authentication strategy initialized successfully 
2025-04-16 22:40:13 INFO [inventory-api:EnvValidator]: Environment: DEVELOPMENT 
2025-04-16 22:40:13 INFO [inventory-api:EnvValidator]: Port: 3000 
2025-04-16 22:40:13 INFO [inventory-api:EnvValidator]: Database: mongodb+srv://ol****:********@cluster0.wncfx.mongodb.net/team_14_final_project?retryWrites=true&w=majority&appName=Cluster0 
2025-04-16 22:40:13 INFO [inventory-api:EnvValidator]: ------- Features Status ------- 
2025-04-16 22:40:13 INFO [inventory-api:EnvValidator]: githubOAuth: Enabled ✅ 
2025-04-16 22:40:13 INFO [inventory-api:EnvValidator]: =============================================== 
2025-04-16 22:40:13 INFO [inventory-api:Server]: Server running on http://localhost:3000 in development mode 
2025-04-16 22:40:13 INFO [inventory-api:Server]: API Documentation: http://localhost:3000/api-docs 
2025-04-16 22:40:17 INFO [inventory-api:Database]: MongoDB Connected: cluster0-shard-00-01.wncfx.mongodb.net 
2025-04-16 22:40:45 DEBUG [inventory-api:App]: Session: 
2025-04-16 22:40:51 DEBUG [inventory-api:App]: Session: 
2025-04-16 22:40:53 INFO [inventory-api:TokenModel]: Token blacklisted for user 67ffb16c3aa8bfc49a5dd1f7 
2025-04-16 22:40:53 INFO [inventory-api:AuthController]: Token blacklisted for user 67ffb16c3aa8bfc49a5dd1f7 
2025-04-16 22:41:09 DEBUG [inventory-api:App]: Session: 
2025-04-16 22:41:09 WARN [inventory-api:Auth:JWT]: Token was found in blacklist during verification 
2025-04-16 22:41:09 WARN [inventory-api:Middleware:Auth]: Invalid or expired token provided 
2025-04-16 22:41:31 DEBUG [inventory-api:App]: Session: 
2025-04-16 22:41:33 WARN [inventory-api:Auth:JWT]: Token was found in blacklist during verification 
2025-04-16 22:41:33 WARN [inventory-api:Middleware:Auth]: Invalid or expired token provided 
2025-04-16 22:42:16 DEBUG [inventory-api:App]: Session: 
2025-04-16 22:42:25 WARN [inventory-api:Middleware:Auth]: Access denied for user USR-00009 with role USER 
2025-04-16 22:42:38 DEBUG [inventory-api:App]: Session: 
2025-04-16 22:42:38 WARN [inventory-api:Middleware:Auth]: No authentication token provided 
2025-04-16 22:42:52 DEBUG [inventory-api:App]: Session: 
2025-04-16 22:42:52 INFO [inventory-api:AuthController]: login controller called 
2025-04-16 22:42:52 DEBUG [inventory-api:AuthService]: authenticateUserService called for email: olwalgeorge15@gmail.com 
2025-04-16 22:42:52 INFO [inventory-api:AuthService]: User authenticated successfully: olwalgeorge15@gmail.com 
2025-04-16 22:43:47 DEBUG [inventory-api:App]: Session: 
2025-04-16 22:43:47 WARN [inventory-api:Middleware:Auth]: Access denied for user USR-00009 with role USER 
2025-04-16 22:51:36 DEBUG [inventory-api:App]: Session: 
2025-04-16 22:51:37 WARN [inventory-api:Middleware:Auth]: Access denied for user USR-00009 with role USER 
2025-04-16 22:51:43 INFO [inventory-api:Server]: SIGINT signal received, shutting down gracefully 
2025-04-16 22:51:43 INFO [inventory-api:Database]: Closing MongoDB connection due to server shutdown 
2025-04-16 22:51:46 DEBUG [inventory-api:TokenModel]: Fixed duplicate indexes in Token schema: 
2025-04-16 22:51:46 INFO [inventory-api:EnvValidator]: =============== ENVIRONMENT SUMMARY =============== 
2025-04-16 22:51:46 INFO [inventory-api:Passport]: GitHub authentication strategy initialized successfully 
2025-04-16 22:51:46 INFO [inventory-api:Server]: Server running on http://localhost:3000 in development mode 
2025-04-16 22:51:46 INFO [inventory-api:EnvValidator]: Environment: DEVELOPMENT 
2025-04-16 22:51:46 INFO [inventory-api:EnvValidator]: Port: 3000 
2025-04-16 22:51:46 INFO [inventory-api:EnvValidator]: Database: mongodb+srv://ol****:********@cluster0.wncfx.mongodb.net/team_14_final_project?retryWrites=true&w=majority&appName=Cluster0 
2025-04-16 22:51:46 INFO [inventory-api:EnvValidator]: ------- Features Status ------- 
2025-04-16 22:51:46 INFO [inventory-api:EnvValidator]: githubOAuth: Enabled ✅ 
2025-04-16 22:51:46 INFO [inventory-api:EnvValidator]: =============================================== 
2025-04-16 22:51:46 INFO [inventory-api:Server]: API Documentation: http://localhost:3000/api-docs 
2025-04-16 22:51:53 INFO [inventory-api:Database]: MongoDB Connected: cluster0-shard-00-02.wncfx.mongodb.net 
2025-04-16 22:52:34 DEBUG [inventory-api:App]: Session: 
2025-04-16 22:52:35 WARN [inventory-api:Middleware:Auth]: Access denied for user USR-00009 with role USER 
2025-04-16 22:52:35 ERROR [inventory-api:ErrorMiddleware]: Error caught in middleware: AuthError - You do not have permission to access this resource. Required role: ADMIN or MANAGER 
2025-04-17 10:02:31 DEBUG [inventory-api:TokenModel]: Fixed duplicate indexes in Token schema: 
2025-04-17 10:02:31 INFO [inventory-api:EnvValidator]: =============== ENVIRONMENT SUMMARY =============== 
2025-04-17 10:02:31 INFO [inventory-api:Passport]: GitHub authentication strategy initialized successfully 
2025-04-17 10:02:31 INFO [inventory-api:Server]: Server running on http://localhost:3000 in development mode 
2025-04-17 10:02:31 INFO [inventory-api:EnvValidator]: Environment: DEVELOPMENT 
2025-04-17 10:02:31 INFO [inventory-api:EnvValidator]: Port: 3000 
2025-04-17 10:02:31 INFO [inventory-api:EnvValidator]: Database: mongodb+srv://ol****:********@cluster0.wncfx.mongodb.net/team_14_final_project?retryWrites=true&w=majority&appName=Cluster0 
2025-04-17 10:02:31 INFO [inventory-api:EnvValidator]: ------- Features Status ------- 
2025-04-17 10:02:31 INFO [inventory-api:EnvValidator]: githubOAuth: Enabled ✅ 
2025-04-17 10:02:31 INFO [inventory-api:EnvValidator]: =============================================== 
2025-04-17 10:02:31 INFO [inventory-api:Server]: API Documentation: http://localhost:3000/api-docs 
2025-04-17 10:02:34 INFO [inventory-api:Database]: MongoDB Connected: cluster0-shard-00-01.wncfx.mongodb.net 
2025-04-17 10:02:52 DEBUG [inventory-api:App]: Session: 
2025-04-17 10:02:52 WARN [inventory-api:Auth:JWT]: Token was found in blacklist during verification 
2025-04-17 10:02:52 ERROR [inventory-api:Middleware:Auth]: Authentication error: Token has been revoked. Please log in again. 
AuthError: Token has been revoked. Please log in again.
    at AuthError.unauthorized (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\utils\errors.js:139:12)
    at verifyToken (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\auth\jwt.js:48:23)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async authenticate (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\middlewares\auth.middleware.js:30:21)
2025-04-17 10:02:52 ERROR [inventory-api:ErrorMiddleware]: Error caught in middleware: AuthError - Authentication failed. 
2025-04-17 10:03:02 DEBUG [inventory-api:App]: Session: 
2025-04-17 10:03:02 INFO [inventory-api:AuthController]: login controller called 
2025-04-17 10:03:02 DEBUG [inventory-api:AuthService]: authenticateUserService called for email: olwalgeorge15@gmail.com 
2025-04-17 10:03:03 INFO [inventory-api:AuthService]: User authenticated successfully: olwalgeorge15@gmail.com 
2025-04-17 10:03:37 DEBUG [inventory-api:App]: Session: 
2025-04-17 10:03:38 INFO [inventory-api:UsersController]: getUserProfile called for user jakom (ID: 67ffb16c3aa8bfc49a5dd1f7) 
2025-04-17 10:03:38 DEBUG [inventory-api:UsersService]: getUserByIdService called with ID: 67ffb16c3aa8bfc49a5dd1f7 
2025-04-17 10:04:21 DEBUG [inventory-api:App]: Session: 
2025-04-17 10:04:21 WARN [inventory-api:Middleware:Auth]: Access denied for user USR-00009 with role USER 
2025-04-17 10:04:21 ERROR [inventory-api:ErrorMiddleware]: Error caught in middleware: AuthError - You do not have permission to access this resource. Required role: ADMIN or MANAGER 
2025-04-17 10:05:43 DEBUG [inventory-api:App]: Session: 
2025-04-17 10:05:51 DEBUG [inventory-api:App]: Session: 
2025-04-17 10:05:53 INFO [inventory-api:TokenModel]: Token blacklisted for user 67ffb16c3aa8bfc49a5dd1f7 
2025-04-17 10:05:53 INFO [inventory-api:AuthController]: Token blacklisted for user 67ffb16c3aa8bfc49a5dd1f7 
2025-04-17 10:06:01 DEBUG [inventory-api:App]: Session: 
2025-04-17 10:06:01 WARN [inventory-api:Auth:JWT]: Token was found in blacklist during verification 
2025-04-17 10:06:01 ERROR [inventory-api:Middleware:Auth]: Authentication error: Token has been revoked. Please log in again. 
AuthError: Token has been revoked. Please log in again.
    at AuthError.unauthorized (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\utils\errors.js:139:12)
    at verifyToken (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\auth\jwt.js:48:23)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async authenticate (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\middlewares\auth.middleware.js:30:21)
2025-04-17 10:06:01 ERROR [inventory-api:ErrorMiddleware]: Error caught in middleware: AuthError - Authentication failed. 
2025-04-17 10:07:27 INFO [inventory-api:Server]: SIGINT signal received, shutting down gracefully 
2025-04-17 10:07:27 INFO [inventory-api:Database]: Closing MongoDB connection due to server shutdown 
2025-04-17 10:29:44 DEBUG [inventory-api:TokenModel]: Fixed duplicate indexes in Token schema: 
2025-04-17 10:29:45 INFO [inventory-api:EnvValidator]: =============== ENVIRONMENT SUMMARY =============== 
2025-04-17 10:29:44 INFO [inventory-api:Passport]: GitHub authentication strategy initialized successfully 
2025-04-17 10:29:45 INFO [inventory-api:Server]: MongoDB connected successfully 
2025-04-17 10:29:45 INFO [inventory-api:EnvValidator]: Environment: DEVELOPMENT 
2025-04-17 10:29:45 INFO [inventory-api:EnvValidator]: Port: 3000 
2025-04-17 10:29:45 INFO [inventory-api:EnvValidator]: Database: mongodb+srv://ol****:********@cluster0.wncfx.mongodb.net/team_14_final_project?retryWrites=true&w=majority&appName=Cluster0 
2025-04-17 10:29:45 INFO [inventory-api:EnvValidator]: ------- Features Status ------- 
2025-04-17 10:29:45 INFO [inventory-api:EnvValidator]: githubOAuth: Enabled ✅ 
2025-04-17 10:29:45 INFO [inventory-api:EnvValidator]: =============================================== 
2025-04-17 10:29:47 INFO [inventory-api:Database]: MongoDB Connected: cluster0-shard-00-00.wncfx.mongodb.net 
2025-04-17 10:29:47 DEBUG [inventory-api:UserUtils]: Generating userID 
2025-04-17 10:29:49 DEBUG [inventory-api:UserUtils]: Generated userID: USR-00010 
2025-04-17 10:29:50 INFO [inventory-api:InitUtils]: SUPERADMIN account created successfully: systemadmin (admin@inventory-system.com) 
2025-04-17 10:29:50 INFO [inventory-api:Server]: Server running on http://localhost:3000 in development mode 
2025-04-17 10:29:50 WARN [inventory-api:InitUtils]: Make sure to change the default superadmin password after first login! 
2025-04-17 10:29:50 INFO [inventory-api:Server]: API Documentation: http://localhost:3000/api-docs 
2025-04-17 10:36:28 INFO [inventory-api:Server]: SIGINT signal received, shutting down gracefully 
2025-04-17 10:36:28 INFO [inventory-api:Database]: Closing MongoDB connection due to server shutdown 
2025-04-17 10:36:33 DEBUG [inventory-api:TokenModel]: Fixed duplicate indexes in Token schema: 
2025-04-17 10:36:34 INFO [inventory-api:EnvValidator]: =============== ENVIRONMENT SUMMARY =============== 
2025-04-17 10:36:33 INFO [inventory-api:Passport]: GitHub authentication strategy initialized successfully 
2025-04-17 10:36:34 INFO [inventory-api:Server]: MongoDB connected successfully 
2025-04-17 10:36:34 INFO [inventory-api:EnvValidator]: Environment: DEVELOPMENT 
2025-04-17 10:36:34 INFO [inventory-api:EnvValidator]: Port: 3000 
2025-04-17 10:36:34 INFO [inventory-api:EnvValidator]: Database: mongodb+srv://ol****:********@cluster0.wncfx.mongodb.net/team_14_final_project?retryWrites=true&w=majority&appName=Cluster0 
2025-04-17 10:36:34 INFO [inventory-api:EnvValidator]: ------- Features Status ------- 
2025-04-17 10:36:34 INFO [inventory-api:EnvValidator]: githubOAuth: Enabled ✅ 
2025-04-17 10:36:34 INFO [inventory-api:EnvValidator]: =============================================== 
2025-04-17 10:36:36 INFO [inventory-api:App]: Connected to MongoDB 
2025-04-17 10:36:36 INFO [inventory-api:InitUtils]: SUPERADMIN account already exists. Skipping initialization. 
2025-04-17 10:36:36 INFO [inventory-api:Server]: Server running on http://localhost:3000 in development mode 
2025-04-17 10:36:36 INFO [inventory-api:Server]: API Documentation: http://localhost:3000/api-docs 
2025-04-17 10:36:38 INFO [inventory-api:InitUtils]: SUPERADMIN account already exists. Skipping initialization. 
2025-04-17 10:37:21 INFO [inventory-api:Server]: SIGINT signal received, shutting down gracefully 
2025-04-17 10:37:21 INFO [inventory-api:Database]: Closing MongoDB connection due to server shutdown 
2025-04-17 10:44:47 DEBUG [inventory-api:TokenModel]: Fixed duplicate indexes in Token schema: 
2025-04-17 10:44:48 INFO [inventory-api:EnvValidator]: =============== ENVIRONMENT SUMMARY =============== 
2025-04-17 10:44:47 INFO [inventory-api:Passport]: GitHub authentication strategy initialized successfully 
2025-04-17 10:44:48 INFO [inventory-api:Server]: MongoDB connected successfully 
2025-04-17 10:44:48 INFO [inventory-api:EnvValidator]: Environment: DEVELOPMENT 
2025-04-17 10:44:48 INFO [inventory-api:EnvValidator]: Port: 3000 
2025-04-17 10:44:48 INFO [inventory-api:EnvValidator]: Database: mongodb+srv://ol****:********@cluster0.wncfx.mongodb.net/team_14_final_project?retryWrites=true&w=majority&appName=Cluster0 
2025-04-17 10:44:48 INFO [inventory-api:EnvValidator]: ------- Features Status ------- 
2025-04-17 10:44:48 INFO [inventory-api:EnvValidator]: githubOAuth: Enabled ✅ 
2025-04-17 10:44:48 INFO [inventory-api:EnvValidator]: =============================================== 
2025-04-17 10:44:51 INFO [inventory-api:Database]: MongoDB Connected: cluster0-shard-00-00.wncfx.mongodb.net 
2025-04-17 10:44:51 INFO [inventory-api:InitUtils]: SUPERADMIN account already exists. Skipping initialization. 
2025-04-17 10:44:51 INFO [inventory-api:Server]: Server running on http://localhost:3000 in development mode 
2025-04-17 10:44:51 INFO [inventory-api:Server]: API Documentation: http://localhost:3000/api-docs 
2025-04-17 10:48:29 DEBUG [inventory-api:App]: Session: 
2025-04-17 10:48:29 DEBUG [inventory-api:App]: Session: 
2025-04-17 10:48:29 DEBUG [inventory-api:App]: Session: 
2025-04-17 10:48:29 DEBUG [inventory-api:App]: Session: 
2025-04-17 10:48:29 DEBUG [inventory-api:App]: Session: 
2025-04-17 10:51:39 DEBUG [inventory-api:App]: Session: 
2025-04-17 10:51:39 INFO [inventory-api:AuthController]: login controller called 
2025-04-17 10:51:39 DEBUG [inventory-api:AuthService]: authenticateUserService called for email: admin@inventory-system.com 
2025-04-17 10:51:40 INFO [inventory-api:AuthService]: User authenticated successfully: admin@inventory-system.com 
2025-04-17 10:57:06 DEBUG [inventory-api:App]: Session: 
2025-04-17 10:57:06 WARN [inventory-api:Middleware:Auth]: Access denied for user USR-00010 with role SUPERADMIN 
2025-04-17 10:57:06 ERROR [inventory-api:ErrorMiddleware]: Error caught in middleware: AuthError - You do not have permission to access this resource. Required role: ADMIN or MANAGER 
2025-04-17 11:01:40 INFO [inventory-api:Server]: SIGINT signal received, shutting down gracefully 
2025-04-17 11:01:40 INFO [inventory-api:Database]: Closing MongoDB connection due to server shutdown 
2025-04-17 11:01:45 DEBUG [inventory-api:TokenModel]: Fixed duplicate indexes in Token schema: 
2025-04-17 11:01:45 INFO [inventory-api:EnvValidator]: =============== ENVIRONMENT SUMMARY =============== 
2025-04-17 11:01:45 INFO [inventory-api:Passport]: GitHub authentication strategy initialized successfully 
2025-04-17 11:01:45 INFO [inventory-api:Server]: MongoDB connected successfully 
2025-04-17 11:01:45 INFO [inventory-api:EnvValidator]: Environment: DEVELOPMENT 
2025-04-17 11:01:45 INFO [inventory-api:EnvValidator]: Port: 3000 
2025-04-17 11:01:45 INFO [inventory-api:EnvValidator]: Database: mongodb+srv://ol****:********@cluster0.wncfx.mongodb.net/team_14_final_project?retryWrites=true&w=majority&appName=Cluster0 
2025-04-17 11:01:45 INFO [inventory-api:EnvValidator]: ------- Features Status ------- 
2025-04-17 11:01:45 INFO [inventory-api:EnvValidator]: githubOAuth: Enabled ✅ 
2025-04-17 11:01:45 INFO [inventory-api:EnvValidator]: =============================================== 
2025-04-17 11:01:51 ERROR [inventory-api:Database]: Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/ 
MongooseServerSelectionError: Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/
    at _handleConnectionErrors (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\mongoose\lib\connection.js:1165:11)
    at NativeConnection.openUri (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\mongoose\lib\connection.js:1096:11)
    at async C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\config\database.js:46:22
2025-04-17 11:01:51 ERROR [inventory-api:App]: Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/ 
MongooseServerSelectionError: Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/
    at _handleConnectionErrors (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\mongoose\lib\connection.js:1165:11)
    at NativeConnection.openUri (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\mongoose\lib\connection.js:1096:11)
    at async C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\config\database.js:46:22
2025-04-17 11:01:56 ERROR [inventory-api:InitUtils]: Failed to initialize SUPERADMIN account: Operation `users.findOne()` buffering timed out after 10000ms 
MongooseError: Operation `users.findOne()` buffering timed out after 10000ms
    at Timeout.<anonymous> (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\mongoose\lib\drivers\node-mongodb-native\collection.js:187:23)
    at listOnTimeout (node:internal/timers:594:17)
    at process.processTimers (node:internal/timers:529:7)
2025-04-17 11:01:56 INFO [inventory-api:Server]: Server running on http://localhost:3000 in development mode 
2025-04-17 11:01:56 INFO [inventory-api:Server]: API Documentation: http://localhost:3000/api-docs 
2025-04-17 11:02:24 INFO [inventory-api:Server]: SIGINT signal received, shutting down gracefully 
2025-04-17 11:02:24 INFO [inventory-api:Database]: No active MongoDB connection to close 
2025-04-17 11:02:34 DEBUG [inventory-api:TokenModel]: Fixed duplicate indexes in Token schema: 
2025-04-17 11:02:34 INFO [inventory-api:EnvValidator]: =============== ENVIRONMENT SUMMARY =============== 
2025-04-17 11:02:34 INFO [inventory-api:Passport]: GitHub authentication strategy initialized successfully 
2025-04-17 11:02:34 INFO [inventory-api:Server]: MongoDB connected successfully 
2025-04-17 11:02:34 INFO [inventory-api:EnvValidator]: Environment: DEVELOPMENT 
2025-04-17 11:02:34 INFO [inventory-api:EnvValidator]: Port: 3000 
2025-04-17 11:02:34 INFO [inventory-api:EnvValidator]: Database: mongodb+srv://ol****:********@cluster0.wncfx.mongodb.net/team_14_final_project?retryWrites=true&w=majority&appName=Cluster0 
2025-04-17 11:02:34 INFO [inventory-api:EnvValidator]: ------- Features Status ------- 
2025-04-17 11:02:34 INFO [inventory-api:EnvValidator]: githubOAuth: Enabled ✅ 
2025-04-17 11:02:34 INFO [inventory-api:EnvValidator]: =============================================== 
2025-04-17 11:02:37 INFO [inventory-api:Database]: MongoDB Connected: cluster0-shard-00-01.wncfx.mongodb.net 
2025-04-17 11:02:37 INFO [inventory-api:InitUtils]: SUPERADMIN account already exists. Skipping initialization. 
2025-04-17 11:02:37 INFO [inventory-api:Server]: Server running on http://localhost:3000 in development mode 
2025-04-17 11:02:37 INFO [inventory-api:Server]: API Documentation: http://localhost:3000/api-docs 
2025-04-17 11:02:53 DEBUG [inventory-api:App]: Session: 
2025-04-17 11:02:54 WARN [inventory-api:Utils:Auth]: Invalid role comparison: SUPERADMIN vs ADMIN 
2025-04-17 11:02:54 WARN [inventory-api:Middleware:Auth]: Access denied for user USR-00010 with role SUPERADMIN 
2025-04-17 11:02:54 ERROR [inventory-api:ErrorMiddleware]: Error caught in middleware: AuthError - You do not have permission to access this resource. Required role: ADMIN or MANAGER 
2025-04-17 11:02:54 WARN [inventory-api:Utils:Auth]: Invalid role comparison: SUPERADMIN vs MANAGER 
2025-04-17 11:04:12 INFO [inventory-api:Server]: SIGINT signal received, shutting down gracefully 
2025-04-17 11:04:12 INFO [inventory-api:Database]: Closing MongoDB connection due to server shutdown 
2025-04-17 11:04:17 DEBUG [inventory-api:TokenModel]: Fixed duplicate indexes in Token schema: 
2025-04-17 11:04:18 INFO [inventory-api:EnvValidator]: =============== ENVIRONMENT SUMMARY =============== 
2025-04-17 11:04:18 INFO [inventory-api:Passport]: GitHub authentication strategy initialized successfully 
2025-04-17 11:04:18 INFO [inventory-api:EnvValidator]: Environment: DEVELOPMENT 
2025-04-17 11:04:18 INFO [inventory-api:EnvValidator]: Port: 3000 
2025-04-17 11:04:18 INFO [inventory-api:EnvValidator]: Database: mongodb+srv://ol****:********@cluster0.wncfx.mongodb.net/team_14_final_project?retryWrites=true&w=majority&appName=Cluster0 
2025-04-17 11:04:18 INFO [inventory-api:EnvValidator]: ------- Features Status ------- 
2025-04-17 11:04:18 INFO [inventory-api:EnvValidator]: githubOAuth: Enabled ✅ 
2025-04-17 11:04:18 INFO [inventory-api:EnvValidator]: =============================================== 
2025-04-17 11:04:18 INFO [inventory-api:Server]: MongoDB connected successfully 
2025-04-17 11:04:21 INFO [inventory-api:Database]: MongoDB Connected: cluster0-shard-00-01.wncfx.mongodb.net 
2025-04-17 11:04:21 INFO [inventory-api:InitUtils]: SUPERADMIN account already exists. Skipping initialization. 
2025-04-17 11:04:21 INFO [inventory-api:Server]: Server running on http://localhost:3000 in development mode 
2025-04-17 11:04:21 INFO [inventory-api:Server]: API Documentation: http://localhost:3000/api-docs 
2025-04-17 11:04:36 DEBUG [inventory-api:App]: Session: 
2025-04-17 11:04:36 INFO [inventory-api:UsersController]: getAllUsers called 
2025-04-17 11:04:36 DEBUG [inventory-api:UsersService]: getAllUsersService called with query: 
2025-04-17 11:04:36 DEBUG [inventory-api:APIFeatures]: Built filter: 
2025-04-17 11:04:36 DEBUG [inventory-api:UsersController]: Query parameters: 
2025-04-17 11:18:31 INFO [inventory-api:Server]: SIGINT signal received, shutting down gracefully 
2025-04-17 11:18:31 INFO [inventory-api:Database]: Closing MongoDB connection due to server shutdown 
2025-04-17 11:22:27 DEBUG [inventory-api:TokenModel]: Fixed duplicate indexes in Token schema: 
2025-04-17 11:22:28 INFO [inventory-api:EnvValidator]: =============== ENVIRONMENT SUMMARY =============== 
2025-04-17 11:22:27 INFO [inventory-api:Passport]: GitHub authentication strategy initialized successfully 
2025-04-17 11:22:28 INFO [inventory-api:EnvValidator]: Environment: DEVELOPMENT 
2025-04-17 11:22:28 INFO [inventory-api:EnvValidator]: Port: 3000 
2025-04-17 11:22:28 INFO [inventory-api:EnvValidator]: Database: mongodb+srv://ol****:********@cluster0.wncfx.mongodb.net/team_14_final_project?retryWrites=true&w=majority&appName=Cluster0 
2025-04-17 11:22:28 INFO [inventory-api:EnvValidator]: ------- Features Status ------- 
2025-04-17 11:22:28 INFO [inventory-api:EnvValidator]: githubOAuth: Enabled ✅ 
2025-04-17 11:22:28 INFO [inventory-api:EnvValidator]: =============================================== 
2025-04-17 11:22:28 INFO [inventory-api:Server]: MongoDB connected successfully 
2025-04-17 11:22:30 INFO [inventory-api:Database]: MongoDB Connected: cluster0-shard-00-02.wncfx.mongodb.net 
2025-04-17 11:22:30 INFO [inventory-api:InitUtils]: SUPERADMIN account already exists. Skipping initialization. 
2025-04-17 11:22:30 INFO [inventory-api:Server]: Server running on http://localhost:3000 in development mode 
2025-04-17 11:22:30 INFO [inventory-api:Server]: API Documentation: http://localhost:3000/api-docs 
2025-04-17 11:37:23 DEBUG [inventory-api:App]: Session: 
2025-04-17 11:37:24 WARN [inventory-api:Auth:JWT]: Token was found in blacklist during verification 
2025-04-17 11:37:24 ERROR [inventory-api:Middleware:Auth]: Authentication error: Token has been revoked. Please log in again. 
AuthError: Token has been revoked. Please log in again.
    at AuthError.unauthorized (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\utils\errors.js:139:12)
    at verifyToken (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\auth\jwt.js:48:23)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async authenticate (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\middlewares\auth.middleware.js:31:21)
2025-04-17 11:37:24 ERROR [inventory-api:ErrorMiddleware]: Error caught in middleware: AuthError - Authentication failed. 
2025-04-17 11:40:59 DEBUG [inventory-api:App]: Session: 
2025-04-17 11:40:59 WARN [inventory-api:Auth:JWT]: Invalid JWT format: 
2025-04-17 11:40:59 ERROR [inventory-api:Middleware:Auth]: Authentication error: Invalid authentication token 
AuthError: Invalid authentication token
    at AuthError.unauthorized (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\utils\errors.js:139:12)
    at verifyToken (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\auth\jwt.js:80:23)
    at authenticate (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\middlewares\auth.middleware.js:31:27)
    at Layer.handle [as handle_request] (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\layer.js:95:5)
    at next (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\route.js:149:13)
    at Route.dispatch (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\route.js:119:3)
    at Layer.handle [as handle_request] (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\layer.js:95:5)
    at C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\index.js:346:12)
    at next (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\index.js:280:10)
2025-04-17 11:40:59 ERROR [inventory-api:ErrorMiddleware]: Error caught in middleware: AuthError - Authentication failed. 
2025-04-17 11:41:02 DEBUG [inventory-api:App]: Session: 
2025-04-17 11:41:02 WARN [inventory-api:Auth:JWT]: Invalid JWT format: 
2025-04-17 11:41:02 ERROR [inventory-api:Middleware:Auth]: Authentication error: Invalid authentication token 
AuthError: Invalid authentication token
    at AuthError.unauthorized (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\utils\errors.js:139:12)
    at verifyToken (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\auth\jwt.js:80:23)
    at authenticate (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\middlewares\auth.middleware.js:31:27)
    at Layer.handle [as handle_request] (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\layer.js:95:5)
    at next (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\route.js:149:13)
    at Route.dispatch (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\route.js:119:3)
    at Layer.handle [as handle_request] (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\layer.js:95:5)
    at C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\index.js:346:12)
    at next (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\index.js:280:10)
2025-04-17 11:41:02 ERROR [inventory-api:ErrorMiddleware]: Error caught in middleware: AuthError - Authentication failed. 
2025-04-17 11:41:03 DEBUG [inventory-api:App]: Session: 
2025-04-17 11:41:03 WARN [inventory-api:Auth:JWT]: Invalid JWT format: 
2025-04-17 11:41:03 ERROR [inventory-api:Middleware:Auth]: Authentication error: Invalid authentication token 
AuthError: Invalid authentication token
    at AuthError.unauthorized (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\utils\errors.js:139:12)
    at verifyToken (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\auth\jwt.js:80:23)
    at authenticate (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\middlewares\auth.middleware.js:31:27)
    at Layer.handle [as handle_request] (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\layer.js:95:5)
    at next (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\route.js:149:13)
    at Route.dispatch (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\route.js:119:3)
    at Layer.handle [as handle_request] (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\layer.js:95:5)
    at C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\index.js:346:12)
    at next (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\index.js:280:10)
2025-04-17 11:41:03 ERROR [inventory-api:ErrorMiddleware]: Error caught in middleware: AuthError - Authentication failed. 
2025-04-17 11:41:04 DEBUG [inventory-api:App]: Session: 
2025-04-17 11:41:04 WARN [inventory-api:Auth:JWT]: Invalid JWT format: 
2025-04-17 11:41:04 ERROR [inventory-api:Middleware:Auth]: Authentication error: Invalid authentication token 
AuthError: Invalid authentication token
    at AuthError.unauthorized (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\utils\errors.js:139:12)
    at verifyToken (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\auth\jwt.js:80:23)
    at authenticate (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\middlewares\auth.middleware.js:31:27)
    at Layer.handle [as handle_request] (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\layer.js:95:5)
    at next (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\route.js:149:13)
    at Route.dispatch (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\route.js:119:3)
    at Layer.handle [as handle_request] (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\layer.js:95:5)
    at C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\index.js:346:12)
    at next (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\index.js:280:10)
2025-04-17 11:41:04 ERROR [inventory-api:ErrorMiddleware]: Error caught in middleware: AuthError - Authentication failed. 
2025-04-17 11:42:58 DEBUG [inventory-api:App]: Session: 
2025-04-17 11:42:58 WARN [inventory-api:Auth:JWT]: Token was found in blacklist during verification 
2025-04-17 11:42:58 ERROR [inventory-api:Middleware:Auth]: Authentication error: Token has been revoked. Please log in again. 
AuthError: Token has been revoked. Please log in again.
    at AuthError.unauthorized (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\utils\errors.js:139:12)
    at verifyToken (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\auth\jwt.js:48:23)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async authenticate (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\middlewares\auth.middleware.js:31:21)
2025-04-17 11:42:58 ERROR [inventory-api:ErrorMiddleware]: Error caught in middleware: AuthError - Authentication failed. 
2025-04-17 11:43:02 DEBUG [inventory-api:App]: Session: 
2025-04-17 11:43:03 WARN [inventory-api:Auth:JWT]: Token was found in blacklist during verification 
2025-04-17 11:43:03 ERROR [inventory-api:Middleware:Auth]: Authentication error: Token has been revoked. Please log in again. 
AuthError: Token has been revoked. Please log in again.
    at AuthError.unauthorized (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\utils\errors.js:139:12)
    at verifyToken (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\auth\jwt.js:48:23)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async authenticate (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\middlewares\auth.middleware.js:31:21)
2025-04-17 11:43:03 ERROR [inventory-api:ErrorMiddleware]: Error caught in middleware: AuthError - Authentication failed. 
2025-04-17 11:43:15 DEBUG [inventory-api:App]: Session: 
2025-04-17 11:43:15 INFO [inventory-api:AuthController]: login controller called 
2025-04-17 11:43:15 DEBUG [inventory-api:AuthService]: authenticateUserService called for email: admin@inventory-system.com 
2025-04-17 11:43:16 INFO [inventory-api:AuthService]: User authenticated successfully: admin@inventory-system.com 
2025-04-17 11:43:55 DEBUG [inventory-api:App]: Session: 
2025-04-17 11:43:55 WARN [inventory-api:Auth:JWT]: Token was found in blacklist during verification 
2025-04-17 11:43:55 ERROR [inventory-api:Middleware:Auth]: Authentication error: Token has been revoked. Please log in again. 
AuthError: Token has been revoked. Please log in again.
    at AuthError.unauthorized (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\utils\errors.js:139:12)
    at verifyToken (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\auth\jwt.js:48:23)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async authenticate (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\middlewares\auth.middleware.js:31:21)
2025-04-17 11:43:55 ERROR [inventory-api:ErrorMiddleware]: Error caught in middleware: AuthError - Authentication failed. 
2025-04-17 11:44:43 DEBUG [inventory-api:App]: Session: 
2025-04-17 11:44:44 INFO [inventory-api:UsersController]: getAllUsers called 
2025-04-17 11:44:44 DEBUG [inventory-api:UsersService]: getAllUsersService called with query: 
2025-04-17 11:44:44 DEBUG [inventory-api:APIFeatures]: Built filter: 
2025-04-17 11:44:44 DEBUG [inventory-api:UsersController]: Query parameters: 
2025-04-17 11:46:14 DEBUG [inventory-api:App]: Session: 
2025-04-17 11:46:15 INFO [inventory-api:UsersController]: getUserProfile called for user systemadmin (ID: 6800aded707777d5a69e2670) 
2025-04-17 11:46:15 DEBUG [inventory-api:UsersService]: getUserByIdService called with ID: 6800aded707777d5a69e2670 
2025-04-17 11:47:59 DEBUG [inventory-api:App]: Session: 
2025-04-17 11:47:59 WARN [inventory-api:Auth:JWT]: Invalid JWT format: 
2025-04-17 11:47:59 ERROR [inventory-api:Middleware:Auth]: Authentication error: Invalid authentication token 
AuthError: Invalid authentication token
    at AuthError.unauthorized (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\utils\errors.js:139:12)
    at verifyToken (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\auth\jwt.js:80:23)
    at authenticate (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\middlewares\auth.middleware.js:31:27)
    at Layer.handle [as handle_request] (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\layer.js:95:5)
    at next (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\route.js:149:13)
    at Route.dispatch (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\route.js:119:3)
    at Layer.handle [as handle_request] (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\layer.js:95:5)
    at C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\index.js:284:15
    at Function.process_params (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\index.js:346:12)
    at next (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\node_modules\express\lib\router\index.js:280:10)
2025-04-17 11:47:59 ERROR [inventory-api:ErrorMiddleware]: Error caught in middleware: AuthError - Authentication failed. 
2025-04-17 11:48:28 DEBUG [inventory-api:App]: Session: 
2025-04-17 11:48:29 INFO [inventory-api:UsersController]: createUser called 
2025-04-17 11:48:29 DEBUG [inventory-api:UserUtils]: Generating userID 
2025-04-17 11:48:29 DEBUG [inventory-api:UsersController]: Request body: 
2025-04-17 11:48:29 DEBUG [inventory-api:UserService:createUser]: Creating new user 
2025-04-17 11:48:29 DEBUG [inventory-api:UserUtils]: Generated userID: USR-00011 
2025-04-17 11:48:29 DEBUG [inventory-api:UserService:createUser]: Generated userID: USR-00011 
2025-04-17 11:48:29 INFO [inventory-api:UserService:createUser]: User created successfully: newadmin (newadmin@example.com) 
2025-04-17 11:49:05 DEBUG [inventory-api:App]: Session: 
2025-04-17 11:49:05 INFO [inventory-api:UsersController]: createUser called 
2025-04-17 11:49:05 DEBUG [inventory-api:UserUtils]: Generating userID 
2025-04-17 11:49:05 DEBUG [inventory-api:UsersController]: Request body: 
2025-04-17 11:49:05 DEBUG [inventory-api:UserService:createUser]: Creating new user 
2025-04-17 11:49:06 DEBUG [inventory-api:UserUtils]: Generated userID: USR-00012 
2025-04-17 11:49:06 DEBUG [inventory-api:UserService:createUser]: Generated userID: USR-00012 
2025-04-17 11:49:06 INFO [inventory-api:UserService:createUser]: User created successfully: newmanager (newmanager@example.com) 
2025-04-17 11:49:48 DEBUG [inventory-api:App]: Session: 
2025-04-17 11:49:49 INFO [inventory-api:UsersController]: createUser called 
2025-04-17 11:49:49 DEBUG [inventory-api:UserUtils]: Generating userID 
2025-04-17 11:49:49 DEBUG [inventory-api:UsersController]: Request body: 
2025-04-17 11:49:49 DEBUG [inventory-api:UserService:createUser]: Creating new user 
2025-04-17 11:49:49 DEBUG [inventory-api:UserUtils]: Generated userID: USR-00013 
2025-04-17 11:49:49 DEBUG [inventory-api:UserService:createUser]: Generated userID: USR-00013 
2025-04-17 11:49:49 ERROR [inventory-api:UsersController]: Error creating user: Validation failed for field: role 
ValidationError: Validation failed for field: role
    at createUserService (C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\services\users.service.js:230:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async C:\Users\PC\OneDrive\Documents\BYU\Pathway\cse341 classwork\week-04\cse341-final-project-team-14\src\controllers\users.controller.js:373:18
2025-04-17 11:49:49 ERROR [inventory-api:ErrorMiddleware]: Error caught in middleware: ValidationError - Validation failed for field: role 
2025-04-17 11:53:01 DEBUG [inventory-api:App]: Session: 
2025-04-17 11:53:02 INFO [inventory-api:UsersController]: createUser called 
2025-04-17 11:53:02 DEBUG [inventory-api:UserUtils]: Generating userID 
2025-04-17 11:53:02 DEBUG [inventory-api:UsersController]: Request body: 
2025-04-17 11:53:02 DEBUG [inventory-api:UserService:createUser]: Creating new user 
2025-04-17 11:53:02 DEBUG [inventory-api:UserUtils]: Generated userID: USR-00014 
2025-04-17 11:53:02 DEBUG [inventory-api:UserService:createUser]: Generated userID: USR-00014 
2025-04-17 11:53:02 INFO [inventory-api:UserService:createUser]: User created successfully: newuser (newuser@example.com) 
2025-04-17 11:53:27 DEBUG [inventory-api:App]: Session: 
2025-04-17 11:53:28 INFO [inventory-api:UsersController]: getAllUsers called 
2025-04-17 11:53:28 DEBUG [inventory-api:UsersService]: getAllUsersService called with query: 
2025-04-17 11:53:28 DEBUG [inventory-api:APIFeatures]: Built filter: 
2025-04-17 11:53:28 DEBUG [inventory-api:UsersController]: Query parameters: 
2025-04-17 12:06:03 INFO [inventory-api:Server]: SIGINT signal received, shutting down gracefully 
2025-04-17 12:06:03 INFO [inventory-api:Database]: Closing MongoDB connection due to server shutdown 
2025-04-17 12:06:10 DEBUG [inventory-api:TokenModel]: Fixed duplicate indexes in Token schema: 
2025-04-17 12:06:10 INFO [inventory-api:EnvValidator]: =============== ENVIRONMENT SUMMARY =============== 
2025-04-17 12:06:10 INFO [inventory-api:Passport]: GitHub authentication strategy initialized successfully 
2025-04-17 12:06:10 INFO [inventory-api:Server]: MongoDB connected successfully 
2025-04-17 12:06:10 INFO [inventory-api:EnvValidator]: Environment: DEVELOPMENT 
2025-04-17 12:06:10 INFO [inventory-api:EnvValidator]: Port: 3000 
2025-04-17 12:06:10 INFO [inventory-api:EnvValidator]: Database: mongodb+srv://ol****:********@cluster0.wncfx.mongodb.net/team_14_final_project?retryWrites=true&w=majority&appName=Cluster0 
2025-04-17 12:06:10 INFO [inventory-api:EnvValidator]: ------- Features Status ------- 
2025-04-17 12:06:10 INFO [inventory-api:EnvValidator]: githubOAuth: Enabled ✅ 
2025-04-17 12:06:10 INFO [inventory-api:EnvValidator]: =============================================== 
2025-04-17 12:06:15 INFO [inventory-api:Database]: MongoDB Connected: cluster0-shard-00-01.wncfx.mongodb.net 
2025-04-17 12:06:16 INFO [inventory-api:InitUtils]: SUPERADMIN account already exists. Skipping initialization. 
2025-04-17 12:06:16 INFO [inventory-api:Server]: Server running on http://localhost:3000 in development mode 
2025-04-17 12:06:16 INFO [inventory-api:Server]: API Documentation: http://localhost:3000/api-docs 
2025-04-17 12:09:06 INFO [inventory-api:Server]: SIGINT signal received, shutting down gracefully 
2025-04-17 12:09:06 INFO [inventory-api:Database]: Closing MongoDB connection due to server shutdown 
2025-04-17 12:09:15 DEBUG [inventory-api:TokenModel]: Fixed duplicate indexes in Token schema: 
2025-04-17 12:09:15 INFO [inventory-api:EnvValidator]: =============== ENVIRONMENT SUMMARY =============== 
2025-04-17 12:09:15 INFO [inventory-api:Passport]: GitHub authentication strategy initialized successfully 
2025-04-17 12:09:15 INFO [inventory-api:EnvValidator]: Environment: DEVELOPMENT 
2025-04-17 12:09:15 INFO [inventory-api:EnvValidator]: Port: 3000 
2025-04-17 12:09:15 INFO [inventory-api:EnvValidator]: Database: mongodb+srv://ol****:********@cluster0.wncfx.mongodb.net/team_14_final_project?retryWrites=true&w=majority&appName=Cluster0 
2025-04-17 12:09:15 INFO [inventory-api:EnvValidator]: ------- Features Status ------- 
2025-04-17 12:09:15 INFO [inventory-api:EnvValidator]: githubOAuth: Enabled ✅ 
2025-04-17 12:09:15 INFO [inventory-api:EnvValidator]: =============================================== 
2025-04-17 12:09:15 INFO [inventory-api:Server]: MongoDB connected successfully 
2025-04-17 12:09:18 INFO [inventory-api:Database]: MongoDB Connected: cluster0-shard-00-00.wncfx.mongodb.net 
2025-04-17 12:09:18 INFO [inventory-api:InitUtils]: SUPERADMIN account already exists. Skipping initialization. 
2025-04-17 12:09:18 INFO [inventory-api:Server]: Server running on http://localhost:3000 in development mode 
2025-04-17 12:09:18 INFO [inventory-api:Server]: API Documentation: http://localhost:3000/api-docs 
2025-04-17 12:10:38 DEBUG [inventory-api:App]: Session: 
2025-04-17 12:10:39 INFO [inventory-api:UsersController]: createUser called 
2025-04-17 12:10:39 DEBUG [inventory-api:UserUtils]: Generating userID 
2025-04-17 12:10:39 DEBUG [inventory-api:UsersController]: Request body: 
2025-04-17 12:10:39 DEBUG [inventory-api:UserService:createUser]: Creating new user 
2025-04-17 12:10:39 DEBUG [inventory-api:UserUtils]: Generated userID: USR-00015 
2025-04-17 12:10:39 DEBUG [inventory-api:UserService:createUser]: Generated userID: USR-00015 
2025-04-17 12:10:39 INFO [inventory-api:UserService:createUser]: User created successfully: newsupervisor (newsupervisor@example.com) 
